{"version":3,"file":"omer.js","sources":["../../../src/omer.ts"],"sourcesContent":["const sefirot = {\n  en: {\n    infix: 'within ',\n    infix26: 'within ',\n    words: [\n      '',\n      'Lovingkindness',\n      'Might',\n      'Beauty',\n      'Eternity',\n      'Splendor',\n      'Foundation',\n      'Majesty',\n    ],\n  },\n  he: {\n    infix: 'שֶׁבְּ',\n    infix26: 'שֶׁבִּ',\n    words: [\n      '',\n      'חֶֽסֶד',\n      'גְבוּרָה',\n      'תִּפאֶרֶת',\n      'נֶּֽצַח',\n      'הוֹד',\n      'יְּסוֹד',\n      'מַּלְכוּת',\n    ],\n  },\n  translit: {\n    infix: \"sheb'\",\n    infix26: 'shebi',\n    words: [\n      '',\n      'Chesed',\n      'Gevurah',\n      'Tiferet',\n      'Netzach',\n      'Hod',\n      'Yesod',\n      'Malkhut',\n    ],\n  },\n} as const;\n\nfunction checkDay(omerDay: number): void {\n  if (omerDay < 1 || omerDay > 49) {\n    throw new RangeError(`Invalid Omer day ${omerDay}`);\n  }\n}\n\nfunction getWeeks(omerDay: number): number[] {\n  const weekNum: number = Math.floor((omerDay - 1) / 7) + 1;\n  const daysWithinWeeks: number = omerDay % 7 || 7;\n  return [weekNum, daysWithinWeeks];\n}\n\n/**\n * Language for counting the Omer can be English or Hebrew.\n * Lang for the Sefira can be English, Hebrew, or Hebrew in Sephardic transliteration.\n */\nexport type OmerLang = 'en' | 'he' | 'translit';\n\n/**\n * Returns the sefira. For example, on day 8\n *  חֶֽסֶד שֶׁבִּגְבוּרָה\n *  Chesed shebiGevurah\n *  Lovingkindness within Might\n * @param omerDay the day of the omer, 1-49 inclusive\n * @param lang `en` (English), `he` (Hebrew with nikud), or `translit` (Hebrew in Sephardic transliteration)\n * @returns a string such as `Lovingkindness within Might` or `חֶֽסֶד שֶׁבִּגְבוּרָה`\n */\nexport function omerSefira(omerDay: number, lang: OmerLang): string {\n  checkDay(omerDay);\n  const [weekNum, daysWithinWeeks]: number[] = getWeeks(omerDay);\n\n  const config = sefirot[lang];\n  const week = config.words[weekNum];\n  const dayWithinWeek = config.words[daysWithinWeeks];\n  const infix = weekNum === 2 || weekNum === 6 ? config.infix26 : config.infix;\n  return (dayWithinWeek + ' ' + infix + week).normalize();\n}\n\n/**\n * Returns a sentence with that evening's omer count\n * @param omerDay the day of the omer, 1-49 inclusive\n * @param lang `en` (English), `he` (Hebrew with nikud)\n * @returns a string such as `Today is 10 days, which is 1 week and 3 days of the Omer`\n *  or `הַיוֹם עֲשָׂרָה יָמִים, שְׁהֵם שָׁבוּעַ אֶחָד וְשְׁלוֹשָׁה יָמִים לָעוֹמֶר`\n */\nexport function omerTodayIs(omerDay: number, lang: OmerLang): string {\n  checkDay(omerDay);\n  if (lang === 'he') {\n    return omerTodayIsHe(omerDay);\n  } else {\n    return omerTodayIsEn(omerDay);\n  }\n}\n\nfunction omerTodayIsEn(omerDay: number): string {\n  const [weekNumber, daysWithinWeeks]: number[] = getWeeks(omerDay);\n\n  const totalDaysStr: string = omerDay === 1 ? 'day' : 'days';\n  let str = `Today is ${omerDay} ${totalDaysStr}`;\n\n  if (weekNumber > 1 || omerDay === 7) {\n    const day7: boolean = daysWithinWeeks === 7;\n    const numWeeks: number = day7 ? weekNumber : weekNumber - 1;\n    const weeksStr: string = numWeeks === 1 ? 'week' : 'weeks';\n    str += `, which is ${numWeeks} ${weeksStr}`;\n    if (!day7) {\n      const daysStr: string = daysWithinWeeks === 1 ? 'day' : 'days';\n      str += ` and ${daysWithinWeeks} ${daysStr}`;\n    }\n  }\n  return str + ' of the Omer';\n}\n\n// adapted from pip hdate package (GPL)\n// https://github.com/py-libhdate/py-libhdate/blob/master/hdate/date.py\n\nconst tens = ['', 'עֲשָׂרָה', 'עֶשְׂרִים', 'שְׁלוֹשִׁים', 'אַרְבָּעִים'];\nconst ones = [\n  '',\n  'אֶחָד',\n  'שְׁנַיִם',\n  'שְׁלוֹשָׁה',\n  'אַרְבָּעָה',\n  'חֲמִשָּׁה',\n  'שִׁשָּׁה',\n  'שִׁבְעָה',\n  'שְׁמוֹנָה',\n  'תִּשְׁעָה',\n];\n\nconst shnei = 'שְׁנֵי';\nconst yamim = 'יָמִים';\nconst shneiYamim = shnei + ' ' + yamim;\nconst shavuot = 'שָׁבוּעוֹת';\nconst yom = 'יוֹם';\nconst yomEchad = yom + ' ' + ones[1];\nconst asar = 'עָשָׂר';\n\nfunction omerTodayIsHe(omerDay: number): string {\n  const ten: number = Math.floor(omerDay / 10);\n  const one: number = omerDay % 10;\n  let str = 'הַיּוֹם ';\n  if (omerDay === 11) {\n    str += 'אַחַד ' + asar;\n  } else if (omerDay === 12) {\n    str += 'שְׁנֵים ' + asar;\n  } else if (12 < omerDay && omerDay < 20) {\n    str += ones[one] + ' ' + asar;\n  } else if (omerDay > 9) {\n    str += ones[one];\n    if (one) {\n      str += ' ';\n      str += ten === 3 ? 'וּ' : 'וְ';\n    }\n  }\n  if (omerDay > 2) {\n    if (omerDay > 20 || omerDay === 10 || omerDay === 20) {\n      str += tens[ten];\n    }\n    if (omerDay < 11) {\n      str += ones[one] + ' ' + yamim + ' ';\n    } else {\n      str += ' ' + yom + ' ';\n    }\n  } else if (omerDay === 1) {\n    str += yomEchad + ' ';\n  } else {\n    // omer == 2\n    str += shneiYamim + ' ';\n  }\n  if (omerDay > 6) {\n    str = str.trim(); // remove trailing space before comma\n    str += ', שְׁהֵם ';\n    const weeks: number = Math.floor(omerDay / 7);\n    const days: number = omerDay % 7;\n    if (weeks > 2) {\n      str += ones[weeks] + ' ' + shavuot + ' ';\n    } else if (weeks === 1) {\n      str += 'שָׁבֽוּעַ' + ' ' + ones[1] + ' ';\n    } else {\n      // weeks == 2\n      str += shnei + ' ' + shavuot + ' ';\n    }\n    if (days) {\n      if (days === 2 || days === 3) {\n        str += 'וּ';\n      } else if (days === 5) {\n        str += 'וַ';\n      } else {\n        str += 'וְ';\n      }\n      if (days > 2) {\n        str += ones[days] + ' ' + yamim + ' ';\n      } else if (days === 1) {\n        str += yomEchad + ' ';\n      } else {\n        // days == 2\n        str += shneiYamim + ' ';\n      }\n    }\n  }\n  str += 'לָעֽוֹמֶר';\n  return str.normalize();\n}\n\n/**\n * Returns an emoji number symbol with a circle, for example `㊲`\n *  from the “Enclosed CJK Letters and Months” block of the Unicode standard\n * @param omerDay the day of the omer, 1-49 inclusive\n * @returns a single Unicode character from `①` through `㊾`\n */\nexport function omerEmoji(omerDay: number): string {\n  checkDay(omerDay);\n  let codePoint: number;\n  if (omerDay <= 20) {\n    codePoint = 9312 + omerDay - 1;\n  } else if (omerDay <= 35) {\n    // between 21 and 35 inclusive\n    codePoint = 12881 + omerDay - 21;\n  } else {\n    // between 36 and 49 inclusive\n    codePoint = 12977 + omerDay - 36;\n  }\n  return String.fromCodePoint(codePoint);\n}\n"],"names":[],"mappings":"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"}