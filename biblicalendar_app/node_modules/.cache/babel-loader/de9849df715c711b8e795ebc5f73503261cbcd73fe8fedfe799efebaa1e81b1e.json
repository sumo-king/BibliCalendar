{"ast":null,"code":"/*! @hebcal/core v5.9.0, distributed under GPLv2 https://www.gnu.org/licenses/gpl-2.0.txt */\nimport { months, HDate } from '@hebcal/hdate';\nimport QuickLRU from 'quick-lru';\nimport { flags } from './event.js';\nimport { dateYomHaShoah, dateYomHaZikaron } from './modern.js';\nimport { getSedra } from './sedra.js';\nimport { staticHolidays, holidayDesc, staticModernHolidays } from './staticHolidays.js';\nimport { YomKippurKatanEvent } from './YomKippurKatanEvent.js';\nimport { HolidayEvent, RoshHashanaEvent, ChanukahEvent, AsaraBTevetEvent, RoshChodeshEvent } from './HolidayEvent.js';\n\n/*\n    Hebcal - A Jewish Calendar Generator\n    Copyright (c) 1994-2020 Danny Sadinoff\n    Portions copyright Eyal Schachter and Michael J. Radwin\n\n    https://github.com/hebcal/hebcal-es6\n\n    This program is free software; you can redistribute it and/or\n    modify it under the terms of the GNU General Public License\n    as published by the Free Software Foundation; either version 2\n    of the License, or (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/** @private */\nfunction observedInIsrael(ev) {\n  return ev.observedInIsrael();\n}\n/** @private */\nfunction observedInDiaspora(ev) {\n  return ev.observedInDiaspora();\n}\n/** @private */\nfunction holidayFilter(il) {\n  return il ? observedInIsrael : observedInDiaspora;\n}\n/**\n * Returns an array of Events on this date (or `undefined` if no events)\n * @param date Hebrew Date, Gregorian date, or absolute R.D. day number\n * @param [il] use the Israeli schedule for holidays\n */\nfunction getHolidaysOnDate(date, il) {\n  const hd = HDate.isHDate(date) ? date : new HDate(date);\n  const hdStr = hd.toString();\n  const yearMap = getHolidaysForYear_(hd.getFullYear());\n  const events = yearMap.get(hdStr);\n  // if il isn't a boolean return both diaspora + IL for day\n  if (typeof il === 'undefined' || typeof events === 'undefined') {\n    return events;\n  }\n  const filtered = events.filter(holidayFilter(il));\n  return filtered;\n}\nconst CHAG = flags.CHAG;\nconst IL_ONLY = flags.IL_ONLY;\nconst LIGHT_CANDLES_TZEIS = flags.LIGHT_CANDLES_TZEIS;\nconst CHANUKAH_CANDLES = flags.CHANUKAH_CANDLES;\nconst MINOR_FAST = flags.MINOR_FAST;\nconst SPECIAL_SHABBAT = flags.SPECIAL_SHABBAT;\nconst MODERN_HOLIDAY = flags.MODERN_HOLIDAY;\nconst MAJOR_FAST = flags.MAJOR_FAST;\nconst MINOR_HOLIDAY = flags.MINOR_HOLIDAY;\nconst EREV = flags.EREV;\nconst SUN = 0;\nconst TUE = 2;\nconst THU = 4;\nconst FRI = 5;\nconst SAT = 6;\nconst NISAN = months.NISAN;\nconst TAMUZ = months.TAMUZ;\nconst AV = months.AV;\nconst TISHREI = months.TISHREI;\nconst KISLEV = months.KISLEV;\nconst TEVET = months.TEVET;\nconst ADAR_I = months.ADAR_I;\nconst ADAR_II = months.ADAR_II;\nconst emojiIsraelFlag = {\n  emoji: 'üáÆüá±'\n};\nconst chanukahEmoji = 'üïé';\nconst yearCache = new QuickLRU({\n  maxSize: 400\n});\nconst KEYCAP_DIGITS = ['0Ô∏è‚É£', '1Ô∏è‚É£', '2Ô∏è‚É£', '3Ô∏è‚É£', '4Ô∏è‚É£', '5Ô∏è‚É£', '6Ô∏è‚É£', '7Ô∏è‚É£', '8Ô∏è‚É£', '9Ô∏è‚É£'];\n/**\n * Lower-level holidays interface, which returns a `Map` of `Event`s indexed by\n * `HDate.toString()`. These events must filtered especially for `flags.IL_ONLY`\n * or `flags.CHUL_ONLY` depending on Israel vs. Diaspora holiday scheme.\n * @private\n */\nfunction getHolidaysForYear_(year) {\n  if (typeof year !== 'number') {\n    throw new TypeError(`bad Hebrew year: ${year}`);\n  } else if (year < 1 || year > 32658) {\n    throw new RangeError(`Hebrew year ${year} out of range 1-32658`);\n  }\n  const cached = yearCache.get(year);\n  if (cached) {\n    return cached;\n  }\n  const RH = new HDate(1, TISHREI, year);\n  const pesach = new HDate(15, NISAN, year);\n  const map = new Map();\n  function add(...events) {\n    for (const ev of events) {\n      const key = ev.date.toString();\n      const arr = map.get(key);\n      if (typeof arr === 'object') {\n        if (arr[0].getFlags() & EREV) {\n          arr.unshift(ev);\n        } else {\n          arr.push(ev);\n        }\n      } else {\n        map.set(key, [ev]);\n      }\n    }\n  }\n  for (const h of staticHolidays) {\n    const hd = new HDate(h.dd, h.mm, year);\n    const ev = new HolidayEvent(hd, h.desc, h.flags);\n    if (h.emoji) ev.emoji = h.emoji;\n    if (h.chmDay) ev.cholHaMoedDay = h.chmDay;\n    add(ev);\n  }\n  // standard holidays that don't shift based on year\n  add(new RoshHashanaEvent(RH, year, CHAG | LIGHT_CANDLES_TZEIS));\n  // Variable date holidays\n  const tzomGedaliahDay = RH.getDay() === THU ? 4 : 3;\n  add(new HolidayEvent(new HDate(tzomGedaliahDay, TISHREI, year), holidayDesc.TZOM_GEDALIAH, MINOR_FAST));\n  // first SAT after RH\n  add(new HolidayEvent(new HDate(HDate.dayOnOrBefore(SAT, 7 + RH.abs())), holidayDesc.SHABBAT_SHUVA, SPECIAL_SHABBAT));\n  const rchTevet = HDate.shortKislev(year) ? new HDate(1, TEVET, year) : new HDate(30, KISLEV, year);\n  add(new HolidayEvent(rchTevet, holidayDesc.CHAG_HABANOT, MINOR_HOLIDAY));\n  // yes, we know Kislev 30-32 are wrong\n  // HDate() corrects the month automatically\n  for (let candles = 2; candles <= 8; candles++) {\n    const hd = new HDate(23 + candles, KISLEV, year);\n    add(new ChanukahEvent(hd, `Chanukah: ${candles} Candles`, MINOR_HOLIDAY | CHANUKAH_CANDLES, {\n      chanukahDay: candles - 1,\n      emoji: chanukahEmoji + KEYCAP_DIGITS[candles]\n    }));\n  }\n  add(new ChanukahEvent(new HDate(32, KISLEV, year), holidayDesc.CHANUKAH_8TH_DAY, MINOR_HOLIDAY, {\n    chanukahDay: 8,\n    emoji: chanukahEmoji\n  }));\n  add(new AsaraBTevetEvent(new HDate(10, TEVET, year), holidayDesc.ASARA_BTEVET, MINOR_FAST));\n  const pesachAbs = pesach.abs();\n  add(new HolidayEvent(new HDate(HDate.dayOnOrBefore(SAT, pesachAbs - 43)), holidayDesc.SHABBAT_SHEKALIM, SPECIAL_SHABBAT), new HolidayEvent(new HDate(HDate.dayOnOrBefore(SAT, pesachAbs - 30)), holidayDesc.SHABBAT_ZACHOR, SPECIAL_SHABBAT), new HolidayEvent(new HDate(pesachAbs - (pesach.getDay() === TUE ? 33 : 31)), holidayDesc.TAANIT_ESTHER, MINOR_FAST));\n  const haChodeshAbs = HDate.dayOnOrBefore(SAT, pesachAbs - 14);\n  add(new HolidayEvent(new HDate(haChodeshAbs - 7), holidayDesc.SHABBAT_PARAH, SPECIAL_SHABBAT), new HolidayEvent(new HDate(haChodeshAbs), holidayDesc.SHABBAT_HACHODESH, SPECIAL_SHABBAT), new HolidayEvent(new HDate(HDate.dayOnOrBefore(SAT, pesachAbs - 1)), holidayDesc.SHABBAT_HAGADOL, SPECIAL_SHABBAT), new HolidayEvent(\n  // if the fast falls on Shabbat, move to Thursday\n  pesach.prev().getDay() === SAT ? pesach.onOrBefore(THU) : new HDate(14, NISAN, year), holidayDesc.TAANIT_BECHOROT, MINOR_FAST));\n  add(new HolidayEvent(new HDate(HDate.dayOnOrBefore(SAT, new HDate(1, TISHREI, year + 1).abs() - 4)), holidayDesc.LEIL_SELICHOT, MINOR_HOLIDAY, {\n    emoji: 'üïç'\n  }));\n  if (pesach.getDay() === SUN) {\n    add(new HolidayEvent(new HDate(16, ADAR_II, year), holidayDesc.PURIM_MESHULASH, MINOR_HOLIDAY));\n  }\n  if (HDate.isLeapYear(year)) {\n    add(new HolidayEvent(new HDate(14, ADAR_I, year), holidayDesc.PURIM_KATAN, MINOR_HOLIDAY, {\n      emoji: 'üé≠Ô∏è'\n    }));\n    add(new HolidayEvent(new HDate(15, ADAR_I, year), holidayDesc.SHUSHAN_PURIM_KATAN, MINOR_HOLIDAY, {\n      emoji: 'üé≠Ô∏è'\n    }));\n  }\n  const nisan27dt = dateYomHaShoah(year);\n  if (nisan27dt) {\n    add(new HolidayEvent(nisan27dt, holidayDesc.YOM_HASHOAH, MODERN_HOLIDAY));\n  }\n  const yomHaZikaronDt = dateYomHaZikaron(year);\n  if (yomHaZikaronDt) {\n    add(new HolidayEvent(yomHaZikaronDt, holidayDesc.YOM_HAZIKARON, MODERN_HOLIDAY, emojiIsraelFlag), new HolidayEvent(yomHaZikaronDt.next(), holidayDesc.YOM_HAATZMA_UT, MODERN_HOLIDAY, emojiIsraelFlag));\n  }\n  for (const h of staticModernHolidays) {\n    if (year >= h.firstYear) {\n      let hd = new HDate(h.dd, h.mm, year);\n      const dow = hd.getDay();\n      if (h.friSatMovetoThu && (dow === FRI || dow === SAT)) {\n        hd = hd.onOrBefore(THU);\n      } else if (h.friPostponeToSun && dow === FRI) {\n        hd = new HDate(hd.abs() + 2);\n      } else if (h.satPostponeToSun && dow === SAT) {\n        hd = hd.next();\n      }\n      const mask = h.chul ? MODERN_HOLIDAY : MODERN_HOLIDAY | IL_ONLY;\n      const ev = new HolidayEvent(hd, h.desc, mask);\n      if (!h.suppressEmoji) {\n        ev.emoji = 'üáÆüá±';\n      }\n      add(ev);\n    }\n  }\n  let tamuz17 = new HDate(17, TAMUZ, year);\n  let tamuz17attrs;\n  if (tamuz17.getDay() === SAT) {\n    tamuz17 = new HDate(18, TAMUZ, year);\n    tamuz17attrs = {\n      observed: true\n    };\n  }\n  add(new HolidayEvent(tamuz17, holidayDesc.TZOM_TAMMUZ, MINOR_FAST, tamuz17attrs));\n  let av9dt = new HDate(9, AV, year);\n  let av9title = holidayDesc.TISHA_BAV;\n  let av9attrs;\n  if (av9dt.getDay() === SAT) {\n    av9dt = av9dt.next();\n    av9attrs = {\n      observed: true\n    };\n    av9title += ' (observed)';\n  }\n  const av9abs = av9dt.abs();\n  add(new HolidayEvent(new HDate(HDate.dayOnOrBefore(SAT, av9abs)), holidayDesc.SHABBAT_CHAZON, SPECIAL_SHABBAT), new HolidayEvent(av9dt.prev(), holidayDesc.EREV_TISHA_BAV, EREV | MAJOR_FAST, av9attrs), new HolidayEvent(av9dt, av9title, MAJOR_FAST, av9attrs), new HolidayEvent(new HDate(HDate.dayOnOrBefore(SAT, av9abs + 7)), holidayDesc.SHABBAT_NACHAMU, SPECIAL_SHABBAT));\n  const monthsInYear = HDate.monthsInYear(year);\n  for (let month = 1; month <= monthsInYear; month++) {\n    const monthName = HDate.getMonthName(month, year);\n    if ((month === NISAN ? HDate.daysInMonth(HDate.monthsInYear(year - 1), year - 1) : HDate.daysInMonth(month - 1, year)) === 30) {\n      add(new RoshChodeshEvent(new HDate(1, month, year), monthName));\n      add(new RoshChodeshEvent(new HDate(30, month - 1, year), monthName));\n    } else if (month !== TISHREI) {\n      add(new RoshChodeshEvent(new HDate(1, month, year), monthName));\n    }\n  }\n  // Begin: Yom Kippur Katan\n  // start at Iyyar because one may not fast during Nisan\n  for (let month = months.IYYAR; month <= monthsInYear; month++) {\n    const nextMonth = month + 1;\n    // Yom Kippur Katan is not observed on the day before Rosh Hashanah.\n    // Not observed prior to Rosh Chodesh Cheshvan because Yom Kippur has just passed.\n    // Not observed before Rosh Chodesh Tevet, because that day is Hanukkah.\n    if (nextMonth === TISHREI || nextMonth === months.CHESHVAN || nextMonth === TEVET) {\n      continue;\n    }\n    let ykk = new HDate(29, month, year);\n    const dow = ykk.getDay();\n    if (dow === FRI || dow === SAT) {\n      ykk = ykk.onOrBefore(THU);\n    }\n    const nextMonthName = HDate.getMonthName(nextMonth, year);\n    const ev = new YomKippurKatanEvent(ykk, nextMonthName);\n    add(ev);\n  }\n  const sedra = getSedra(year, false);\n  const beshalachHd = sedra.find(15);\n  add(new HolidayEvent(beshalachHd, holidayDesc.SHABBAT_SHIRAH, SPECIAL_SHABBAT));\n  // Birkat Hachamah appears only once every 28 years\n  const birkatHaChama = getBirkatHaChama(year);\n  if (birkatHaChama) {\n    const hd = new HDate(birkatHaChama);\n    add(new HolidayEvent(hd, holidayDesc.BIRKAT_HACHAMAH, MINOR_HOLIDAY, {\n      emoji: '‚òÄÔ∏è'\n    }));\n  }\n  yearCache.set(year, map);\n  return map;\n}\n/**\n * Birkat Hachamah appears only once every 28 years.\n * Although almost always in Nisan, it can occur in Adar II.\n *   - 27 Adar II 5461 (Gregorian year 1701)\n *   - 29 Adar II 5993 (Gregorian year 2233)\n *\n * Due to drift, this will eventually slip into Iyyar\n *   - 2 Iyyar 7141 (Gregorian year 3381)\n * @private\n */\nfunction getBirkatHaChama(year) {\n  const leap = HDate.isLeapYear(year);\n  const startMonth = leap ? ADAR_II : NISAN;\n  const startDay = leap ? 20 : 1;\n  const baseRd = HDate.hebrew2abs(year, startMonth, startDay);\n  for (let day = 0; day <= 40; day++) {\n    const abs = baseRd + day;\n    const elapsed = abs + 1373429;\n    if (elapsed % 10227 === 172) {\n      return abs;\n    }\n  }\n  return 0;\n}\n/**\n * Returns an array of holidays for the year\n * @param year Hebrew year\n * @param il use the Israeli schedule for holidays\n */\nfunction getHolidaysForYearArray(year, il) {\n  const yearMap = getHolidaysForYear_(year);\n  const startAbs = HDate.hebrew2abs(year, TISHREI, 1);\n  const endAbs = HDate.hebrew2abs(year + 1, TISHREI, 1) - 1;\n  let events = [];\n  const myFilter = il ? observedInIsrael : observedInDiaspora;\n  for (let absDt = startAbs; absDt <= endAbs; absDt++) {\n    const hd = new HDate(absDt);\n    const holidays = yearMap.get(hd.toString());\n    if (holidays) {\n      const filtered = holidays.filter(myFilter);\n      events = events.concat(filtered);\n    }\n  }\n  return events;\n}\nexport { getHolidaysForYearArray, getHolidaysForYear_, getHolidaysOnDate };","map":{"version":3,"names":["observedInIsrael","ev","observedInDiaspora","holidayFilter","il","getHolidaysOnDate","date","hd","HDate","isHDate","hdStr","toString","yearMap","getHolidaysForYear_","getFullYear","events","get","filtered","filter","CHAG","flags","IL_ONLY","LIGHT_CANDLES_TZEIS","CHANUKAH_CANDLES","MINOR_FAST","SPECIAL_SHABBAT","MODERN_HOLIDAY","MAJOR_FAST","MINOR_HOLIDAY","EREV","SUN","TUE","THU","FRI","SAT","NISAN","months","TAMUZ","AV","TISHREI","KISLEV","TEVET","ADAR_I","ADAR_II","emojiIsraelFlag","emoji","chanukahEmoji","yearCache","QuickLRU","maxSize","KEYCAP_DIGITS","year","TypeError","RangeError","cached","RH","pesach","map","Map","add","key","arr","getFlags","unshift","push","set","h","staticHolidays","dd","mm","HolidayEvent","desc","chmDay","cholHaMoedDay","RoshHashanaEvent","tzomGedaliahDay","getDay","holidayDesc","TZOM_GEDALIAH","dayOnOrBefore","abs","SHABBAT_SHUVA","rchTevet","shortKislev","CHAG_HABANOT","candles","ChanukahEvent","chanukahDay","CHANUKAH_8TH_DAY","AsaraBTevetEvent","ASARA_BTEVET","pesachAbs","SHABBAT_SHEKALIM","SHABBAT_ZACHOR","TAANIT_ESTHER","haChodeshAbs","SHABBAT_PARAH","SHABBAT_HACHODESH","SHABBAT_HAGADOL","prev","onOrBefore","TAANIT_BECHOROT","LEIL_SELICHOT","PURIM_MESHULASH","isLeapYear","PURIM_KATAN","SHUSHAN_PURIM_KATAN","nisan27dt","dateYomHaShoah","YOM_HASHOAH","yomHaZikaronDt","dateYomHaZikaron","YOM_HAZIKARON","next","YOM_HAATZMA_UT","staticModernHolidays","firstYear","dow","friSatMovetoThu","friPostponeToSun","satPostponeToSun","mask","chul","suppressEmoji","tamuz17","tamuz17attrs","observed","TZOM_TAMMUZ","av9dt","av9title","TISHA_BAV","av9attrs","av9abs","SHABBAT_CHAZON","EREV_TISHA_BAV","SHABBAT_NACHAMU","monthsInYear","month","monthName","getMonthName","daysInMonth","RoshChodeshEvent","IYYAR","nextMonth","CHESHVAN","ykk","nextMonthName","YomKippurKatanEvent","sedra","getSedra","beshalachHd","find","SHABBAT_SHIRAH","birkatHaChama","getBirkatHaChama","BIRKAT_HACHAMAH","leap","startMonth","startDay","baseRd","hebrew2abs","day","elapsed","getHolidaysForYearArray","startAbs","endAbs","myFilter","absDt","holidays","concat"],"sources":["/Users/shelton/Desktop/Personal Projects/BibliCalendar/biblicalendar_app/node_modules/@hebcal/src/holidays.ts"],"sourcesContent":["/*\n    Hebcal - A Jewish Calendar Generator\n    Copyright (c) 1994-2020 Danny Sadinoff\n    Portions copyright Eyal Schachter and Michael J. Radwin\n\n    https://github.com/hebcal/hebcal-es6\n\n    This program is free software; you can redistribute it and/or\n    modify it under the terms of the GNU General Public License\n    as published by the Free Software Foundation; either version 2\n    of the License, or (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nimport {HDate, months} from '@hebcal/hdate';\nimport QuickLRU from 'quick-lru';\nimport {Event, flags} from './event';\nimport {dateYomHaShoah, dateYomHaZikaron} from './modern';\nimport {getSedra} from './sedra';\nimport {\n  staticHolidays,\n  staticModernHolidays,\n  holidayDesc as hdesc,\n} from './staticHolidays';\nimport {YomKippurKatanEvent} from './YomKippurKatanEvent';\nimport {\n  HolidayEvent,\n  ChanukahEvent,\n  AsaraBTevetEvent,\n  RoshHashanaEvent,\n  RoshChodeshEvent,\n} from './HolidayEvent';\n\n/** @private */\nfunction observedInIsrael(ev: Event): boolean {\n  return ev.observedInIsrael();\n}\n\n/** @private */\nfunction observedInDiaspora(ev: Event): boolean {\n  return ev.observedInDiaspora();\n}\n\n/** @private */\nfunction holidayFilter(il: boolean) {\n  return il ? observedInIsrael : observedInDiaspora;\n}\n\n/**\n * Returns an array of Events on this date (or `undefined` if no events)\n * @param date Hebrew Date, Gregorian date, or absolute R.D. day number\n * @param [il] use the Israeli schedule for holidays\n */\nexport function getHolidaysOnDate(\n  date: HDate | Date | number,\n  il?: boolean\n): HolidayEvent[] | undefined {\n  const hd = HDate.isHDate(date) ? (date as HDate) : new HDate(date);\n  const hdStr = hd.toString();\n  const yearMap = getHolidaysForYear_(hd.getFullYear());\n  const events = yearMap.get(hdStr);\n  // if il isn't a boolean return both diaspora + IL for day\n  if (typeof il === 'undefined' || typeof events === 'undefined') {\n    return events;\n  }\n  const filtered = events.filter(holidayFilter(il));\n  return filtered;\n}\n\nconst CHAG = flags.CHAG;\nconst IL_ONLY = flags.IL_ONLY;\nconst LIGHT_CANDLES_TZEIS = flags.LIGHT_CANDLES_TZEIS;\nconst CHANUKAH_CANDLES = flags.CHANUKAH_CANDLES;\nconst MINOR_FAST = flags.MINOR_FAST;\nconst SPECIAL_SHABBAT = flags.SPECIAL_SHABBAT;\nconst MODERN_HOLIDAY = flags.MODERN_HOLIDAY;\nconst MAJOR_FAST = flags.MAJOR_FAST;\nconst MINOR_HOLIDAY = flags.MINOR_HOLIDAY;\nconst EREV = flags.EREV;\n\nconst SUN = 0;\nconst TUE = 2;\nconst THU = 4;\nconst FRI = 5;\nconst SAT = 6;\n\nconst NISAN = months.NISAN;\nconst TAMUZ = months.TAMUZ;\nconst AV = months.AV;\nconst TISHREI = months.TISHREI;\nconst KISLEV = months.KISLEV;\nconst TEVET = months.TEVET;\nconst ADAR_I = months.ADAR_I;\nconst ADAR_II = months.ADAR_II;\n\nconst emojiIsraelFlag = {emoji: 'üáÆüá±'} as const;\nconst chanukahEmoji = 'üïé';\nexport type HolidayYearMap = Map<string, HolidayEvent[]>;\nconst yearCache = new QuickLRU<number, HolidayYearMap>({maxSize: 400});\n\nconst KEYCAP_DIGITS = [\n  '0Ô∏è‚É£',\n  '1Ô∏è‚É£',\n  '2Ô∏è‚É£',\n  '3Ô∏è‚É£',\n  '4Ô∏è‚É£',\n  '5Ô∏è‚É£',\n  '6Ô∏è‚É£',\n  '7Ô∏è‚É£',\n  '8Ô∏è‚É£',\n  '9Ô∏è‚É£',\n] as const;\n\n/**\n * Lower-level holidays interface, which returns a `Map` of `Event`s indexed by\n * `HDate.toString()`. These events must filtered especially for `flags.IL_ONLY`\n * or `flags.CHUL_ONLY` depending on Israel vs. Diaspora holiday scheme.\n * @private\n */\nexport function getHolidaysForYear_(year: number): HolidayYearMap {\n  if (typeof year !== 'number') {\n    throw new TypeError(`bad Hebrew year: ${year}`);\n  } else if (year < 1 || year > 32658) {\n    throw new RangeError(`Hebrew year ${year} out of range 1-32658`);\n  }\n  const cached = yearCache.get(year);\n  if (cached) {\n    return cached;\n  }\n\n  const RH = new HDate(1, TISHREI, year);\n  const pesach = new HDate(15, NISAN, year);\n\n  const map = new Map<string, HolidayEvent[]>();\n  function add(...events: HolidayEvent[]) {\n    for (const ev of events) {\n      const key = ev.date.toString();\n      const arr = map.get(key);\n      if (typeof arr === 'object') {\n        if (arr[0].getFlags() & EREV) {\n          arr.unshift(ev);\n        } else {\n          arr.push(ev);\n        }\n      } else {\n        map.set(key, [ev]);\n      }\n    }\n  }\n\n  for (const h of staticHolidays) {\n    const hd = new HDate(h.dd, h.mm, year);\n    const ev = new HolidayEvent(hd, h.desc, h.flags);\n    if (h.emoji) ev.emoji = h.emoji;\n    if (h.chmDay) ev.cholHaMoedDay = h.chmDay;\n    add(ev);\n  }\n\n  // standard holidays that don't shift based on year\n  add(new RoshHashanaEvent(RH, year, CHAG | LIGHT_CANDLES_TZEIS));\n\n  // Variable date holidays\n  const tzomGedaliahDay: number = RH.getDay() === THU ? 4 : 3;\n  add(\n    new HolidayEvent(\n      new HDate(tzomGedaliahDay, TISHREI, year),\n      hdesc.TZOM_GEDALIAH,\n      MINOR_FAST\n    )\n  );\n  // first SAT after RH\n  add(\n    new HolidayEvent(\n      new HDate(HDate.dayOnOrBefore(SAT, 7 + RH.abs())),\n      hdesc.SHABBAT_SHUVA,\n      SPECIAL_SHABBAT\n    )\n  );\n  const rchTevet = HDate.shortKislev(year)\n    ? new HDate(1, TEVET, year)\n    : new HDate(30, KISLEV, year);\n  add(new HolidayEvent(rchTevet, hdesc.CHAG_HABANOT, MINOR_HOLIDAY));\n  // yes, we know Kislev 30-32 are wrong\n  // HDate() corrects the month automatically\n  for (let candles = 2; candles <= 8; candles++) {\n    const hd = new HDate(23 + candles, KISLEV, year);\n    add(\n      new ChanukahEvent(\n        hd,\n        `Chanukah: ${candles} Candles`,\n        MINOR_HOLIDAY | CHANUKAH_CANDLES,\n        {\n          chanukahDay: candles - 1,\n          emoji: chanukahEmoji + KEYCAP_DIGITS[candles],\n        }\n      )\n    );\n  }\n  add(\n    new ChanukahEvent(\n      new HDate(32, KISLEV, year),\n      hdesc.CHANUKAH_8TH_DAY,\n      MINOR_HOLIDAY,\n      {chanukahDay: 8, emoji: chanukahEmoji}\n    )\n  );\n  add(\n    new AsaraBTevetEvent(\n      new HDate(10, TEVET, year),\n      hdesc.ASARA_BTEVET,\n      MINOR_FAST\n    )\n  );\n  const pesachAbs = pesach.abs();\n  add(\n    new HolidayEvent(\n      new HDate(HDate.dayOnOrBefore(SAT, pesachAbs - 43)),\n      hdesc.SHABBAT_SHEKALIM,\n      SPECIAL_SHABBAT\n    ),\n    new HolidayEvent(\n      new HDate(HDate.dayOnOrBefore(SAT, pesachAbs - 30)),\n      hdesc.SHABBAT_ZACHOR,\n      SPECIAL_SHABBAT\n    ),\n    new HolidayEvent(\n      new HDate(pesachAbs - (pesach.getDay() === TUE ? 33 : 31)),\n      hdesc.TAANIT_ESTHER,\n      MINOR_FAST\n    )\n  );\n  const haChodeshAbs = HDate.dayOnOrBefore(SAT, pesachAbs - 14);\n  add(\n    new HolidayEvent(\n      new HDate(haChodeshAbs - 7),\n      hdesc.SHABBAT_PARAH,\n      SPECIAL_SHABBAT\n    ),\n    new HolidayEvent(\n      new HDate(haChodeshAbs),\n      hdesc.SHABBAT_HACHODESH,\n      SPECIAL_SHABBAT\n    ),\n    new HolidayEvent(\n      new HDate(HDate.dayOnOrBefore(SAT, pesachAbs - 1)),\n      hdesc.SHABBAT_HAGADOL,\n      SPECIAL_SHABBAT\n    ),\n    new HolidayEvent(\n      // if the fast falls on Shabbat, move to Thursday\n      pesach.prev().getDay() === SAT\n        ? pesach.onOrBefore(THU)\n        : new HDate(14, NISAN, year),\n      hdesc.TAANIT_BECHOROT,\n      MINOR_FAST\n    )\n  );\n  add(\n    new HolidayEvent(\n      new HDate(\n        HDate.dayOnOrBefore(SAT, new HDate(1, TISHREI, year + 1).abs() - 4)\n      ),\n      hdesc.LEIL_SELICHOT,\n      MINOR_HOLIDAY,\n      {emoji: 'üïç'}\n    )\n  );\n\n  if (pesach.getDay() === SUN) {\n    add(\n      new HolidayEvent(\n        new HDate(16, ADAR_II, year),\n        hdesc.PURIM_MESHULASH,\n        MINOR_HOLIDAY\n      )\n    );\n  }\n\n  if (HDate.isLeapYear(year)) {\n    add(\n      new HolidayEvent(\n        new HDate(14, ADAR_I, year),\n        hdesc.PURIM_KATAN,\n        MINOR_HOLIDAY,\n        {emoji: 'üé≠Ô∏è'}\n      )\n    );\n    add(\n      new HolidayEvent(\n        new HDate(15, ADAR_I, year),\n        hdesc.SHUSHAN_PURIM_KATAN,\n        MINOR_HOLIDAY,\n        {emoji: 'üé≠Ô∏è'}\n      )\n    );\n  }\n\n  const nisan27dt = dateYomHaShoah(year);\n  if (nisan27dt) {\n    add(new HolidayEvent(nisan27dt, hdesc.YOM_HASHOAH, MODERN_HOLIDAY));\n  }\n\n  const yomHaZikaronDt = dateYomHaZikaron(year);\n  if (yomHaZikaronDt) {\n    add(\n      new HolidayEvent(\n        yomHaZikaronDt,\n        hdesc.YOM_HAZIKARON,\n        MODERN_HOLIDAY,\n        emojiIsraelFlag\n      ),\n      new HolidayEvent(\n        yomHaZikaronDt.next(),\n        hdesc.YOM_HAATZMA_UT,\n        MODERN_HOLIDAY,\n        emojiIsraelFlag\n      )\n    );\n  }\n\n  for (const h of staticModernHolidays) {\n    if (year >= h.firstYear) {\n      let hd = new HDate(h.dd, h.mm, year);\n      const dow = hd.getDay();\n      if (h.friSatMovetoThu && (dow === FRI || dow === SAT)) {\n        hd = hd.onOrBefore(THU);\n      } else if (h.friPostponeToSun && dow === FRI) {\n        hd = new HDate(hd.abs() + 2);\n      } else if (h.satPostponeToSun && dow === SAT) {\n        hd = hd.next();\n      }\n      const mask = h.chul ? MODERN_HOLIDAY : MODERN_HOLIDAY | IL_ONLY;\n      const ev = new HolidayEvent(hd, h.desc, mask);\n      if (!h.suppressEmoji) {\n        ev.emoji = 'üáÆüá±';\n      }\n      add(ev);\n    }\n  }\n\n  let tamuz17 = new HDate(17, TAMUZ, year);\n  let tamuz17attrs;\n  if (tamuz17.getDay() === SAT) {\n    tamuz17 = new HDate(18, TAMUZ, year);\n    tamuz17attrs = {observed: true};\n  }\n  add(new HolidayEvent(tamuz17, hdesc.TZOM_TAMMUZ, MINOR_FAST, tamuz17attrs));\n\n  let av9dt = new HDate(9, AV, year);\n  let av9title = hdesc.TISHA_BAV;\n  let av9attrs;\n  if (av9dt.getDay() === SAT) {\n    av9dt = av9dt.next();\n    av9attrs = {observed: true};\n    av9title += ' (observed)';\n  }\n  const av9abs = av9dt.abs();\n  add(\n    new HolidayEvent(\n      new HDate(HDate.dayOnOrBefore(SAT, av9abs)),\n      hdesc.SHABBAT_CHAZON,\n      SPECIAL_SHABBAT\n    ),\n    new HolidayEvent(\n      av9dt.prev(),\n      hdesc.EREV_TISHA_BAV,\n      EREV | MAJOR_FAST,\n      av9attrs\n    ),\n    new HolidayEvent(av9dt, av9title, MAJOR_FAST, av9attrs),\n    new HolidayEvent(\n      new HDate(HDate.dayOnOrBefore(SAT, av9abs + 7)),\n      hdesc.SHABBAT_NACHAMU,\n      SPECIAL_SHABBAT\n    )\n  );\n\n  const monthsInYear = HDate.monthsInYear(year);\n  for (let month = 1; month <= monthsInYear; month++) {\n    const monthName = HDate.getMonthName(month, year);\n    if (\n      (month === NISAN\n        ? HDate.daysInMonth(HDate.monthsInYear(year - 1), year - 1)\n        : HDate.daysInMonth(month - 1, year)) === 30\n    ) {\n      add(new RoshChodeshEvent(new HDate(1, month, year), monthName));\n      add(new RoshChodeshEvent(new HDate(30, month - 1, year), monthName));\n    } else if (month !== TISHREI) {\n      add(new RoshChodeshEvent(new HDate(1, month, year), monthName));\n    }\n  }\n\n  // Begin: Yom Kippur Katan\n  // start at Iyyar because one may not fast during Nisan\n  for (let month = months.IYYAR; month <= monthsInYear; month++) {\n    const nextMonth = month + 1;\n    // Yom Kippur Katan is not observed on the day before Rosh Hashanah.\n    // Not observed prior to Rosh Chodesh Cheshvan because Yom Kippur has just passed.\n    // Not observed before Rosh Chodesh Tevet, because that day is Hanukkah.\n    if (\n      nextMonth === TISHREI ||\n      nextMonth === months.CHESHVAN ||\n      nextMonth === TEVET\n    ) {\n      continue;\n    }\n    let ykk = new HDate(29, month, year);\n    const dow = ykk.getDay();\n    if (dow === FRI || dow === SAT) {\n      ykk = ykk.onOrBefore(THU);\n    }\n\n    const nextMonthName = HDate.getMonthName(nextMonth, year);\n    const ev = new YomKippurKatanEvent(ykk, nextMonthName);\n    add(ev);\n  }\n\n  const sedra = getSedra(year, false);\n  const beshalachHd = sedra.find(15) as HDate;\n  add(new HolidayEvent(beshalachHd, hdesc.SHABBAT_SHIRAH, SPECIAL_SHABBAT));\n\n  // Birkat Hachamah appears only once every 28 years\n  const birkatHaChama = getBirkatHaChama(year);\n  if (birkatHaChama) {\n    const hd = new HDate(birkatHaChama);\n    add(\n      new HolidayEvent(hd, hdesc.BIRKAT_HACHAMAH, MINOR_HOLIDAY, {emoji: '‚òÄÔ∏è'})\n    );\n  }\n\n  yearCache.set(year, map);\n  return map;\n}\n\n/**\n * Birkat Hachamah appears only once every 28 years.\n * Although almost always in Nisan, it can occur in Adar II.\n *   - 27 Adar II 5461 (Gregorian year 1701)\n *   - 29 Adar II 5993 (Gregorian year 2233)\n *\n * Due to drift, this will eventually slip into Iyyar\n *   - 2 Iyyar 7141 (Gregorian year 3381)\n * @private\n */\nfunction getBirkatHaChama(year: number): number {\n  const leap = HDate.isLeapYear(year);\n  const startMonth = leap ? ADAR_II : NISAN;\n  const startDay = leap ? 20 : 1;\n  const baseRd = HDate.hebrew2abs(year, startMonth, startDay);\n  for (let day = 0; day <= 40; day++) {\n    const abs = baseRd + day;\n    const elapsed = abs + 1373429;\n    if (elapsed % 10227 === 172) {\n      return abs;\n    }\n  }\n  return 0;\n}\n\n/**\n * Returns an array of holidays for the year\n * @param year Hebrew year\n * @param il use the Israeli schedule for holidays\n */\nexport function getHolidaysForYearArray(\n  year: number,\n  il: boolean\n): HolidayEvent[] {\n  const yearMap = getHolidaysForYear_(year);\n  const startAbs = HDate.hebrew2abs(year, TISHREI, 1);\n  const endAbs = HDate.hebrew2abs(year + 1, TISHREI, 1) - 1;\n  let events: HolidayEvent[] = [];\n  const myFilter = il ? observedInIsrael : observedInDiaspora;\n  for (let absDt = startAbs; absDt <= endAbs; absDt++) {\n    const hd = new HDate(absDt);\n    const holidays = yearMap.get(hd.toString());\n    if (holidays) {\n      const filtered: HolidayEvent[] = holidays.filter(myFilter);\n      events = events.concat(filtered);\n    }\n  }\n  return events;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}